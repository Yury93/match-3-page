window.__require=function e(t,o,n){function i(c,s){if(!o[c]){if(!t[c]){var a=c.split("/");if(a=a[a.length-1],!t[a]){var l="function"==typeof __require&&__require;if(!s&&l)return l(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+c+"'")}c=a}var u=o[c]={exports:{}};t[c][0].call(u.exports,function(e){return i(t[c][1][e]||e)},u,u.exports,e,t,o,n)}return o[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<n.length;c++)i(n[c]);return i}({"abstract-machanic":[function(e,t,o){"use strict";cc._RF.push(t,"4087dTF1DBMPasvTIMFzaFf","abstract-machanic"),Object.defineProperty(o,"__esModule",{value:!0}),o.AbstractMechanic=void 0;var n=e("./mechanic-event-system"),i=e("./mechanic-types"),r=function(){function e(e){this.tileFactory=e,this.mechanicType=i.MechanicType.Basic}return e.prototype.init=function(e,t){this.tableController=e,this.tableModel=t},e.prototype.onTurnEnd=function(){throw new Error("Method not implemented.")},e.prototype.onTileClick=function(){throw new Error("Method not implemented.")},e.prototype.dropTiles=function(){for(var e=this.tableModel.getTileCount(),t=e.columns,o=e.rows,n=0;n<t;n++)for(var i=o-1;i>=0;i--)if(!this.tableModel.getTile(n,i))for(var r=i-1;r>=0;r--){var c=this.tableModel.getTile(n,r);if(c){this.tableModel.setTile(n,i,c),this.tableModel.setTile(n,r,null),this.tableModel.onMoveTileAction(c,this.tableModel.getCell(n,i).getPosition()),this.tableModel.getCell(n,i).setFree(!1),this.tableModel.getCell(n,r).setFree(!0);break}}},e.prototype.fillEmpty=function(){for(var e=this.tableModel.getTileCount(),t=e.columns,o=e.rows,n=0;n<t;n++)for(var i=0;i<o;i++)if(!this.tableModel.getTile(n,i)){var r=this.tableModel.getCell(n,i),c=this.tileFactory.createRandomTile(r);this.tableModel.setTile(n,i,c),r.setFree(!1),this.tableModel.onAddTile(c,r)}},e.prototype.dispatchUseMechanicEvent=function(){n.MechanicEventSystem.dispatch({type:n.MechanicEventType.MECHANIC_USED,mechanic:this,mechanicType:this.mechanicType})},e}();o.AbstractMechanic=r,cc._RF.pop()},{"./mechanic-event-system":"mechanic-event-system","./mechanic-types":"mechanic-types"}],"asset-provider":[function(e,t,o){"use strict";cc._RF.push(t,"0e0c2jhz8xFuIYXqwXL54UA","asset-provider");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function c(e){try{a(n.next(e))}catch(t){r(t)}}function s(e){try{a(n.throw(e))}catch(t){r(t)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(c,s)}a((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return a([e,t])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=t.call(e,c)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.AssetProvider=void 0;var r=function(){function e(){this._assets={}}return e.prototype.loadAsset=function(e){return n(this,void 0,Promise,function(){var t=this;return i(this,function(){return this._assets[e]?[2,this._assets[e]]:[2,new Promise(function(o,n){cc.resources.load(e,function(i,r){if(i)return console.error("Failed to load asset: "+e,i),void n(i);t._assets[e]=r,o(r)})})]})})},e.prototype.getAsset=function(e){return this._assets[e]},e.prototype.instantiateAsset=function(e){return this._assets[e]?cc.instantiate(this._assets[e]):(console.error("Asset not found: "+e),null)},e.prototype.unloadAsset=function(e){this._assets[e]&&(console.log("Unloading asset: "+e),cc.resources.release(this._assets[e]),delete this._assets[e])},e}();o.AssetProvider=r,cc._RF.pop()},{}],"basic-mechanic":[function(e,t,o){"use strict";cc._RF.push(t,"b7740EWJ5tK7pmA/ZOz0Zh0","basic-mechanic");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.BasicMechanic=void 0;var r=e("./abstract-machanic"),c=e("./mechanic-types"),s=function(e){function t(t){var o=e.call(this,t)||this;return o.mechanicType=c.MechanicType.Basic,o}return i(t,e),t.prototype.onTileClick=function(e){var t=this.findConnectedTiles(e);return t.length<2?(this.tableController.onFalseBurned(e),!1):(this.burnTiles(t),this.dropTiles(),this.fillEmpty(),this.tableController.onBurnAction&&this.tableController.onBurnAction(t.length),this.dispatchUseMechanicEvent(),!0)},t.prototype.onTurnEnd=function(){},t.prototype.findConnectedTiles=function(e){if(!e||!this.tableController)return[];console.log("startTile: ",e,"/tileSprite "+e.sprite+" / tile node: "+e.nodeTile);for(var t=this.tableModel.getTileCount(),o=new Set,n=[e],i=e.tileType,r=[{col:-1,row:0},{col:1,row:0},{col:0,row:-1},{col:0,row:1}];n.length>0;){var c=n.pop();if(!o.has(c)){o.add(c);var s=this.tableModel.getTilePosition(c);if(s)for(var a=0,l=r;a<l.length;a++){var u=l[a],p=s.col+u.col,h=s.row+u.row;if(!(p<0||h<0||p>=t.columns||h>=t.rows)){var f=this.tableModel.getTile(p,h);f&&!o.has(f)&&f.tileType===i&&n.push(f)}}}}return Array.from(o)},t.prototype.burnTiles=function(e){var t=this;e.forEach(function(e){var o=t.tableModel.getTilePosition(e),n=o.col,i=o.row;n>=0&&i>=0&&(t.tableController.onClearTile(e),t.tableModel.setTile(n,i,null),t.tableModel.getCell(n,i).setFree(!0))})},t}(r.AbstractMechanic);o.BasicMechanic=s,cc._RF.pop()},{"./abstract-machanic":"abstract-machanic","./mechanic-types":"mechanic-types"}],"booster-bomb-mechanic":[function(e,t,o){"use strict";cc._RF.push(t,"88fb2FhSS5Hi5ZpYpuptDU+","booster-bomb-mechanic");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.BoosterBombMechanic=void 0;var r=e("../../configs/configs"),c=e("./abstract-machanic"),s=e("./mechanic-types"),a=function(e){function t(t){var o=e.call(this,t)||this;return o.RADIUS=r.CONSTANTS.boosterBombR,o.mechanicType=s.MechanicType.BombBoster,o}return i(t,e),t.prototype.onTileClick=function(e){var t=this;this.tableController.onBombAction(e);var o=this.tableModel.getTilePosition(e),n=o.col,i=o.row;if(n<0||i<0)return!1;for(var r=this.tableModel.getTileCount(),c=r.columns,s=r.rows,a=[],l=-this.RADIUS;l<=this.RADIUS;l++)for(var u=-this.RADIUS;u<=this.RADIUS;u++){var p=n+l,h=i+u;if(p>=0&&p<c&&h>=0&&h<s){var f=this.tableModel.getTile(p,h);f&&a.push(f)}}return 0!==a.length&&(a.forEach(function(e){var o=t.tableModel.getTilePosition(e);t.tableController.onClearTile(e),t.tableModel.setTile(o.col,o.row,null),t.tableModel.getCell(o.col,o.row).setFree(!0)}),this.dropTiles(),this.fillEmpty(),this.tableController.onBurnAction&&this.tableController.onBurnAction(a.length),this.dispatchUseMechanicEvent(),this.onTurnEnd(),!0)},t.prototype.onTurnEnd=function(){this.tableController.onTurnEnd()},t}(c.AbstractMechanic);o.BoosterBombMechanic=a,cc._RF.pop()},{"../../configs/configs":"configs","./abstract-machanic":"abstract-machanic","./mechanic-types":"mechanic-types"}],"booster-handler":[function(e,t,o){"use strict";cc._RF.push(t,"26db8bMyIRE7q9TmY+bfmKV","booster-handler"),Object.defineProperty(o,"__esModule",{value:!0}),o.BoosterHandler=void 0;var n=e("./mechanic-event-system"),i=e("./mechanic-types"),r=function(){function e(e,t){this.updateCallbacks=[],this._bombTrials=e,this._teleportTrials=t,n.MechanicEventSystem.subscribe(this)}return e.prototype.onMechanicEvent=function(e){e.type===n.MechanicEventType.MECHANIC_USED&&(e.mechanicType===i.MechanicType.BombBoster?this.consumeBomb():e.mechanicType===i.MechanicType.TeleportBoster&&this.consumeTeleport())},e.prototype.consumeBomb=function(){this._bombTrials>0&&(this._bombTrials--,this.notifyUpdate())},e.prototype.consumeTeleport=function(){this._teleportTrials>0&&(this._teleportTrials--,this.notifyUpdate())},e.prototype.onUpdate=function(e){this.updateCallbacks.push(e)},e.prototype.notifyUpdate=function(){this.updateCallbacks.forEach(function(e){return e()})},e.prototype.getBombTrials=function(){return this._bombTrials},e.prototype.getTeleportTrials=function(){return this._teleportTrials},e.prototype.destroy=function(){n.MechanicEventSystem.unsubscribe(this),this.updateCallbacks=[]},e}();o.BoosterHandler=r,cc._RF.pop()},{"./mechanic-event-system":"mechanic-event-system","./mechanic-types":"mechanic-types"}],configs:[function(e,t,o){"use strict";cc._RF.push(t,"cc9b28JaFxFzoHL/6aJzNPq","configs"),Object.defineProperty(o,"__esModule",{value:!0}),o.TILE_MODELS=o.PREFABS=o.GAME_CONFIG=o.CONSTANTS=o.TABLE=void 0;var n=e("../logic/tile-type");o.TABLE=[{column:2,lines:2,grid:95},{column:9,lines:9,grid:95},{column:6,lines:6,grid:95}];var i=[{id:0,maxSteps:2,winScoreThreshold:2},{id:1,maxSteps:10,winScoreThreshold:10},{id:2,maxSteps:12,winScoreThreshold:25},{id:3,maxSteps:25,winScoreThreshold:50},{id:4,maxSteps:25,winScoreThreshold:60},{id:5,maxSteps:35,winScoreThreshold:100},{id:6,maxSteps:45,winScoreThreshold:110},{id:7,maxSteps:55,winScoreThreshold:150},{id:8,maxSteps:60,winScoreThreshold:155},{id:9,maxSteps:70,winScoreThreshold:160},{id:10,maxSteps:70,winScoreThreshold:170},{id:11,maxSteps:70,winScoreThreshold:500}];o.CONSTANTS={boosterBombR:1,scoreFormulaIndex:1,bombTrials:3,teleportTrials:3};var r=[{formula:function(e){return e*e*5}},{formula:function(e){return e}}],c=function(){function e(){}return e.prototype.getScoreFormula=function(){return r[o.CONSTANTS.scoreFormulaIndex].formula},e.prototype.getLevel=function(e){return i.find(function(t){return t.id===e})||(console.error("Level with id "+e+" not found return 0 level"),i[0])},e}();o.GAME_CONFIG=new c,o.PREFABS={tablePrefab:"table/Table",UIPanelPrefab:"table/UI",BombEffectPrefab:"table/ExplosionEffect",tilePrefab:"tiles/TilePrefab",curtainPrefab:"curtain/Curtain"},o.TILE_MODELS=[{path:"tiles/block_blue",type:n.TileType.BLUE},{path:"tiles/block_green",type:n.TileType.GREEN},{path:"tiles/block_purpure",type:n.TileType.PURPLE},{path:"tiles/block_red",type:n.TileType.RED},{path:"tiles/block_yellow",type:n.TileType.YELLOW}],cc._RF.pop()},{"../logic/tile-type":"tile-type"}],"create-content-state":[function(e,t,o){"use strict";cc._RF.push(t,"1697280MopCpYIN+QlXWY/d","create-content-state");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function c(e){try{a(n.next(e))}catch(t){r(t)}}function s(e){try{a(n.throw(e))}catch(t){r(t)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(c,s)}a((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return a([e,t])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=t.call(e,c)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.CreateContentState=void 0;var r=e("../state-machine/state-names"),c=e("../../logic/game-mechanic/mechanic-controller"),s=e("../../ui/ui-panel-controller"),a=e("../../configs/configs"),l=e("../../logic/game-mechanic/booster-handler"),u=e("../../logic/progress-controller"),p=function(){function e(e,t,o,n,i,r){this._stateMachine=e,this._gameFactory=t,this._tilesFactory=o,this._vfxFactory=n,this._progressService=i,this._levelService=r,this._tableView=null,this._uiPanelView=null,this._isLoadAssets=!1}return e.prototype.run=function(){return n(this,void 0,Promise,function(){return i(this,function(e){switch(e.label){case 0:return console.log("run create content state"),this._isLoadAssets?[3,2]:[4,this._gameFactory.loadAssets()];case 1:e.sent(),this._isLoadAssets=!0,e.label=2;case 2:return this.destroyContent(),this.createContent(),[2]}})})},e.prototype.destroyContent=function(){this._tableView&&(this._tableView.nodeView.destroy(),this._tableView=null),this._uiPanelView&&(this._uiPanelView.nodeView.destroy(),this._uiPanelView=null)},e.prototype.createContent=function(){this.createViews();var e=this.createTableCells(),t=this.createTiles(e),o=this.createTableModel(e,t),n=this.createTableController(o),i=this.createMechanicController(n,o);n.setMechanicController(i);var r=this.createBoosterHandler(),c=this.createProgressController(),s=this.createUIPanelController(i,r,c);this.startGameLoopState(o,n,r,c,s)},e.prototype.createViews=function(){this._tableView=this._gameFactory.createTableView(),this._uiPanelView=this._gameFactory.createUiPanelView()},e.prototype.createTableCells=function(){var e=this._tableView.getContent();return this._gameFactory.createTableCells(e)},e.prototype.createTiles=function(e){return this._tilesFactory.createTiles(e)},e.prototype.createTableModel=function(e,t){return this._gameFactory.createTableModel(e,t)},e.prototype.createTableController=function(e){return this._gameFactory.createTableController(this._tableView,e,this._vfxFactory)},e.prototype.createMechanicController=function(e,t){return new c.MechanicController(this._tilesFactory,e,t)},e.prototype.createBoosterHandler=function(){return new l.BoosterHandler(a.CONSTANTS.bombTrials,a.CONSTANTS.teleportTrials)},e.prototype.createProgressController=function(){return new u.ProgressController(this._progressService,this._levelService)},e.prototype.createUIPanelController=function(e,t,o){return new s.UIPanelController(o,this._progressService,this._uiPanelView,e,t)},e.prototype.startGameLoopState=function(e,t,o,n,i){this._stateMachine.run(r.StateNames.GameLoop,{tableModel:e,tableController:t,uiPanelView:this._uiPanelView,uiPanelController:i,boosterHandler:o,progressController:n})},e.prototype.stop=function(){console.log("stop create content state")},e}();o.CreateContentState=p,cc._RF.pop()},{"../../configs/configs":"configs","../../logic/game-mechanic/booster-handler":"booster-handler","../../logic/game-mechanic/mechanic-controller":"mechanic-controller","../../logic/progress-controller":"progress-controller","../../ui/ui-panel-controller":"ui-panel-controller","../state-machine/state-names":"state-names"}],curtain:[function(e,t,o){"use strict";cc._RF.push(t,"8309dgtnxtJqLUdtZYjvtY0","curtain");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resultLabel=null,t.restartButton=null,t.continueButton=null,t.fadeSprite=null,t.curtainSprite=null,t._startPosCurtain=null,t}return i(t,e),t.prototype.win=function(e){this.showResult(this.continueButton,e)},t.prototype.lose=function(e){this.showResult(this.restartButton,e)},t.prototype.showResult=function(e,t){var o=this;this.subscribeButtonEvents(),this._startPosCurtain=this.curtainSprite.node.position,this.resultLabel.string="",this.showFade(!0),this.showCurtain(function(){e.node.active=!0,o.resultLabel.string=t}).start()},t.prototype.clickRestart=function(){this.handleGameAction(this.restartButton.node,this.onRestart)},t.prototype.clickContinue=function(){this.handleGameAction(this.continueButton.node,this.onContinue)},t.prototype.handleGameAction=function(e,t){var o=this;this.unsubscribeButtonEvents(),this.showCurtain(function(){o.showFade(!1),o.resultLabel.node.active=!1,e.active=!1}).call(function(){o.node.destroy(),t&&t()}).start()},t.prototype.showFade=function(e){e?cc.tween(this.fadeSprite.node).to(.5,{opacity:170}).start():cc.tween(this.fadeSprite.node).to(.5,{opacity:0}).start()},t.prototype.showCurtain=function(e){return cc.Tween.stopAllByTarget(this.curtainSprite.node),cc.tween(this.curtainSprite.node).to(.3,{x:0},{easing:"quadOut"}).call(function(){e&&e()}).delay(1).to(.3,{x:this._startPosCurtain.x},{easing:"quadOut"})},t.prototype.subscribeButtonEvents=function(){this.restartButton.node.on(cc.Node.EventType.TOUCH_END,this.clickRestart,this),this.continueButton.node.on(cc.Node.EventType.TOUCH_END,this.clickContinue,this)},t.prototype.unsubscribeButtonEvents=function(){this.restartButton.node.off(cc.Node.EventType.TOUCH_END,this.clickRestart,this),this.continueButton.node.off(cc.Node.EventType.TOUCH_END,this.clickContinue,this)},t.prototype.onDestroy=function(){this.curtainSprite&&this.curtainSprite.node&&cc.Tween.stopAllByTarget(this.curtainSprite.node),this.fadeSprite&&this.fadeSprite.node&&cc.Tween.stopAllByTarget(this.fadeSprite.node)},r([a(cc.Label)],t.prototype,"resultLabel",void 0),r([a(cc.Button)],t.prototype,"restartButton",void 0),r([a(cc.Button)],t.prototype,"continueButton",void 0),r([a(cc.Sprite)],t.prototype,"fadeSprite",void 0),r([a(cc.Sprite)],t.prototype,"curtainSprite",void 0),r([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],"entry-point":[function(e,t,o){"use strict";cc._RF.push(t,"a9aa5EFkiRHk7gsuM2EnD8q","entry-point");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./game"),s=e("./services/serviceLocator"),a=cc._decorator.ccclass,l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){console.log("start create game"),this._game=new c.Game(s.ServiceLocator.Container())},r([a],t)}(cc.Component);o.default=l,cc._RF.pop()},{"./game":"game","./services/serviceLocator":"serviceLocator"}],"game-factory":[function(e,t,o){"use strict";cc._RF.push(t,"a22c79dktBITo5Qf/ubjskH","game-factory");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function c(e){try{a(n.next(e))}catch(t){r(t)}}function s(e){try{a(n.throw(e))}catch(t){r(t)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(c,s)}a((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return a([e,t])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=t.call(e,c)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.GameFactory=void 0;var r=e("../../../configs/configs"),c=e("../../../logic/table-cell"),s=e("../../../logic/table/table-view"),a=e("../../../logic/table/table-model"),l=e("../../../curtain/curtain"),u=e("../../../logic/table/table-controller"),p=e("../../../ui/ui-panel"),h=function(){function e(e){this._assetProvider=e}return e.prototype.loadAssets=function(){return n(this,void 0,void 0,function(){var e=this;return i(this,function(t){switch(t.label){case 0:return[4,this._assetProvider.loadAsset(r.PREFABS.curtainPrefab)];case 1:return t.sent(),[4,this._assetProvider.loadAsset(r.PREFABS.tablePrefab)];case 2:return t.sent(),[4,this._assetProvider.loadAsset(r.PREFABS.tilePrefab)];case 3:return t.sent(),[4,this._assetProvider.loadAsset(r.PREFABS.UIPanelPrefab)];case 4:return t.sent(),[4,this._assetProvider.loadAsset(r.PREFABS.BombEffectPrefab)];case 5:return t.sent(),[4,Promise.all(r.TILE_MODELS.map(function(t){return e._assetProvider.loadAsset(t.path)}))];case 6:return t.sent(),[2]}})})},e.prototype.createTableView=function(){try{return this.instantiateOnCanvas(r.PREFABS.tablePrefab,s.default)}catch(e){console.error("Failed to create table:",e)}},e.prototype.createUiPanelView=function(){try{return this.instantiateOnCanvas(r.PREFABS.UIPanelPrefab,p.UiPanelView)}catch(e){console.error("Failed to create UI panel:",e)}},e.prototype.createCurtain=function(){try{var e=cc.director.getScene().getChildByName("Canvas"),t=this._assetProvider.instantiateAsset(r.PREFABS.curtainPrefab).getComponent(l.default);return t.node.setParent(e),t.node.setPosition(0,0),t}catch(o){console.error("Failed to create curtain:",o)}},e.prototype.createTableController=function(e,t,o){return new u.TableController(e,t,o)},e.prototype.createTableModel=function(e,t){return new a.TableModel(e,t)},e.prototype.createTableCells=function(){for(var e=[],t=Math.floor(Math.random()*r.TABLE.length),o=r.TABLE[t],n=o.column,i=o.lines,s=o.grid,a=o.grid,l=-(n-1)*s/2,u=(i-1)*a/2,p=0;p<n;p++){e[p]=[];for(var h=0;h<i;h++){var f=new cc.Vec2(l+p*s,u-h*a),v=new c.TableCell(p,h,f,!0);e[p][h]=v}}return e},e.prototype.instantiateOnCanvas=function(e,t){var o=cc.director.getScene().getChildByName("Canvas"),n=this._assetProvider.instantiateAsset(e).getComponent(t);return n.node.setParent(o),n.node.setPosition(0,0),n},e}();o.GameFactory=h,cc._RF.pop()},{"../../../configs/configs":"configs","../../../curtain/curtain":"curtain","../../../logic/table-cell":"table-cell","../../../logic/table/table-controller":"table-controller","../../../logic/table/table-model":"table-model","../../../logic/table/table-view":"table-view","../../../ui/ui-panel":"ui-panel"}],"game-loop-state":[function(e,t,o){"use strict";cc._RF.push(t,"851aeQvhJ1KmZWYl006WD2h","game-loop-state"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameLoopState=void 0;var n=e("../state-machine/state-names"),i=function(){function e(e,t,o){this._stateMachine=e,this._progressService=t,this._movePlayerValidator=o,this._isResultShown=!1}return e.prototype.run=function(e){var t=this;this._isResultShown=!1,this._tableModel=e.tableModel,this._tableController=e.tableController,this._boosterHandler=e.boosterHandler,this._uiPanelController=e.uiPanelController,this._progressController=e.progressController,this.tryResolveMoves(),this._tableController.onBurnAction=function(e){t._progressService.nextStep(e),t._uiPanelController.updateScore(),t._progressController.checkProgress(),t.tryResolveMoves()},this._tableController.onEndTurnAction=function(){t.tryResolveMoves()},this._tableController.onFalseBurned=function(){t._boosterHandler.getBombTrials()>0&&t._uiPanelController.summonClickBomb(),t._isResultShown||t.hasBoosterTrials()||t._progressController.checkProgress(),t.tryResolveMoves()},this._progressController.onWinEvent=function(){return t.handleGameEnd("win","\u0423\u0441\u043f\u0435\u0445!")},this._progressController.onLoseEvent=function(){return t.handleGameEnd("lose","\u0417\u0430\u043a\u043e\u043d\u0447\u0438\u043b\u0438\u0441\u044c\n \u0448\u0430\u0433\u0438...")}},e.prototype.hasBoosterTrials=function(){return this._boosterHandler.getBombTrials()>0||this._boosterHandler.getTeleportTrials()>0},e.prototype.tryResolveMoves=function(){this._isResultShown||this.hasBoosterTrials()||this.resolveImpossibleMoves()},e.prototype.resolveImpossibleMoves=function(){this._movePlayerValidator.hasPossibleMoves(this._tableModel)||this.handleGameEnd("lose","\u041d\u0435\u0442\n \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u043e\u0432...")},e.prototype.handleGameEnd=function(e,t){this._tableController.onBurnAction=null,this._tableController.onFalseBurned=null,this._boosterHandler.destroy(),this._isResultShown=!0,this._tableController.removeClickTileListeners(),this._uiPanelController.removeBoosterListeners(),this._stateMachine.run(n.StateNames.ResultState,{result:e,message:t,tableController:this._tableController})},e.prototype.stop=function(){},e}();o.GameLoopState=i,cc._RF.pop()},{"../state-machine/state-names":"state-names"}],"game-mechanic":[function(e,t,o){"use strict";cc._RF.push(t,"665bafOwBlEUZdBQC7YO+W7","game-mechanic"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],"game-state-machine":[function(e,t,o){"use strict";cc._RF.push(t,"336a1fdwvFLYaOGZ3QrUEMe","game-state-machine"),Object.defineProperty(o,"__esModule",{value:!0}),o.StateMachine=void 0;var n=e("../states/create-content-state"),i=e("../services/gameFactory/game-factory"),r=e("../states/game-loop-state"),c=e("../states/initialize-state"),s=e("../services/gameFactory/tile-factory"),a=e("../services/gameFactory/vfx-factory"),l=e("../services/move-validator"),u=e("../services/levels/level-service"),p=e("../services/levels/progress-service"),h=e("../states/result-state"),f=function(){function e(e){this.currentState=null,console.log("start register process states in state machine"),this.registerStates(e),console.log("end register process")}return e.prototype.registerStates=function(e){this._states={InitializeState:new c.InitializeState(this,e),CreateContentState:new n.CreateContentState(this,e.single(i.GameFactory),e.single(s.TileFactory),e.single(a.VfxFactory),e.single(p.ProgressService),e.single(u.LevelService)),GameLoopState:new r.GameLoopState(this,e.single(p.ProgressService),e.single(l.MovePlayerValidator)),ResultState:new h.ResultState(this,e.single(i.GameFactory),e.single(p.ProgressService))},console.log("States registered:",Object.keys(this._states))},e.prototype.run=function(e,t){var o,n=this._states[e];n?(null===(o=this.currentState)||void 0===o||o.stop(),this.currentState=n,n.run(t)):console.error("State not registered:",e,"/ all keys: "+Object.keys(this._states))},e}();o.StateMachine=f,cc._RF.pop()},{"../services/gameFactory/game-factory":"game-factory","../services/gameFactory/tile-factory":"tile-factory","../services/gameFactory/vfx-factory":"vfx-factory","../services/levels/level-service":"level-service","../services/levels/progress-service":"progress-service","../services/move-validator":"move-validator","../states/create-content-state":"create-content-state","../states/game-loop-state":"game-loop-state","../states/initialize-state":"initialize-state","../states/result-state":"result-state"}],game:[function(e,t,o){"use strict";cc._RF.push(t,"9468cogMLRPSL1kSlPBKw9q","game"),Object.defineProperty(o,"__esModule",{value:!0}),o.Game=void 0;var n=e("./state-machine/game-state-machine"),i=e("./state-machine/state-names");o.Game=function(e){console.log("start create state machine"),this.stateMachine=new n.StateMachine(e),console.log("this.stateMachine.run(StateNames.Initialize);  / StateArgument:",i.StateNames.Initialize),this.stateMachine.run(i.StateNames.Initialize)},cc._RF.pop()},{"./state-machine/game-state-machine":"game-state-machine","./state-machine/state-names":"state-names"}],"initialize-state":[function(e,t,o){"use strict";cc._RF.push(t,"81e10bI9VtLoLLZzzBQMAT3","initialize-state"),Object.defineProperty(o,"__esModule",{value:!0}),o.InitializeState=void 0;var n=e("../services/move-validator"),i=e("../services/gameFactory/asset-provider"),r=e("../services/gameFactory/game-factory"),c=e("../services/gameFactory/tile-factory"),s=e("../services/gameFactory/vfx-factory"),a=e("../state-machine/state-names"),l=e("../services/levels/level-service"),u=e("../services/levels/progress-service"),p=e("../../configs/configs"),h=e("../services/levels/level-config-service"),f=function(){function e(e,t){this._stateMachine=e,this._serviceLocator=t,console.log("run RegisterDependecies");var o=new i.AssetProvider,a=new r.GameFactory(o),f=new c.TileFactory(o),v=new s.VfxFactory(o),d=new h.LevelConfigService(p.GAME_CONFIG),y=new l.LevelService(d),b=new u.ProgressService(y,d.getScoreFormula()),_=new n.MovePlayerValidator;this._serviceLocator.registerSingle(o),this._serviceLocator.registerSingle(a),this._serviceLocator.registerSingle(f),this._serviceLocator.registerSingle(v),this._serviceLocator.registerSingle(b),this._serviceLocator.registerSingle(_),this._serviceLocator.registerSingle(d),this._serviceLocator.registerSingle(y),this._serviceLocator.registerSingle(b)}return e.prototype.run=function(){this._stateMachine.run(a.StateNames.CreateContent)},e.prototype.stop=function(){console.log("Stopping RegisterDependecies")},e}();o.InitializeState=f,cc._RF.pop()},{"../../configs/configs":"configs","../services/gameFactory/asset-provider":"asset-provider","../services/gameFactory/game-factory":"game-factory","../services/gameFactory/tile-factory":"tile-factory","../services/gameFactory/vfx-factory":"vfx-factory","../services/levels/level-config-service":"level-config-service","../services/levels/level-service":"level-service","../services/levels/progress-service":"progress-service","../services/move-validator":"move-validator","../state-machine/state-names":"state-names"}],"level-config-service":[function(e,t,o){"use strict";cc._RF.push(t,"fc61ax+LoJJkLKq2LHmgKOk","level-config-service"),Object.defineProperty(o,"__esModule",{value:!0}),o.LevelConfigService=void 0;var n=e("../../../configs/configs"),i=function(){function e(e){void 0===e&&(e=n.GAME_CONFIG),this._config=e}return e.prototype.getLevel=function(e){return this._config.getLevel(e)},e.prototype.getScoreFormula=function(){return this._config.getScoreFormula()},e}();o.LevelConfigService=i,cc._RF.pop()},{"../../../configs/configs":"configs"}],"level-service":[function(e,t,o){"use strict";cc._RF.push(t,"4c6f85DOGhBYYE9SRYAf+e9","level-service"),Object.defineProperty(o,"__esModule",{value:!0}),o.LevelService=void 0;var n=function(){function e(e){this._levelConfig=e,this._currentLevelId=0}return e.prototype.getCurrentLevel=function(){return this._levelConfig.getLevel(this._currentLevelId)},e.prototype.nextLevel=function(){this._currentLevelId++},e.prototype.reset=function(){this._currentLevelId=0},e}();o.LevelService=n,cc._RF.pop()},{}],"mechanic-controller":[function(e,t,o){"use strict";cc._RF.push(t,"27c3fTyvS9DDoHh15eZyjuX","mechanic-controller"),Object.defineProperty(o,"__esModule",{value:!0}),o.MechanicController=void 0;var n=e("./basic-mechanic"),i=e("./booster-bomb-mechanic"),r=e("./teleport-booster-mechanic"),c=function(){function e(e,t,o){this._mechanics=[],this._activeMechanic=null,this.initMechanics(t,o,[new n.BasicMechanic(e),new i.BoosterBombMechanic(e),new r.TeleportBoosterMechanic(e)])}return e.prototype.initMechanics=function(e,t,o){this._mechanics=o,o.forEach(function(o){return o.init(e,t)});try{this.setActiveMechanic(this.getMechanicByType(n.BasicMechanic))}catch(i){throw i}},e.prototype.setActiveMechanic=function(e){console.log("set active mechanic : ",e),this._activeMechanic=e},e.prototype.getActiveMechanic=function(){return this._activeMechanic},e.prototype.getMechanicByType=function(e){return this._mechanics.find(function(t){return t instanceof e})},e.prototype.onTileClick=function(e){this._activeMechanic&&(this.onClickTile&&this.onClickTile(e),!this._activeMechanic.onTileClick(e)||this._activeMechanic instanceof n.BasicMechanic||this.setActiveMechanic(this.getMechanicByType(n.BasicMechanic)))},e.prototype.removeListeners=function(){this.onClickTile=null},e.prototype.onTurnEnd=function(){for(var e=0,t=this._mechanics;e<t.length;e++){var o=t[e];o.onTurnEnd&&o.onTurnEnd()}},e}();o.MechanicController=c,cc._RF.pop()},{"./basic-mechanic":"basic-mechanic","./booster-bomb-mechanic":"booster-bomb-mechanic","./teleport-booster-mechanic":"teleport-booster-mechanic"}],"mechanic-event-system":[function(e,t,o){"use strict";cc._RF.push(t,"88fe2Io3/xLTKHYM5wKeP0i","mechanic-event-system"),Object.defineProperty(o,"__esModule",{value:!0}),o.MechanicEventSystem=o.MechanicEventType=void 0,(o.MechanicEventType||(o.MechanicEventType={})).MECHANIC_USED="MECHANIC_USED";var n=function(){function e(){}return e.subscribe=function(e){this.observers.push(e)},e.unsubscribe=function(e){var t=this.observers.indexOf(e);-1!==t&&this.observers.splice(t,1)},e.dispatch=function(e){for(var t=0,o=this.observers;t<o.length;t++)o[t].onMechanicEvent(e)},e.observers=[],e}();o.MechanicEventSystem=n,cc._RF.pop()},{}],"mechanic-types":[function(e,t,o){"use strict";cc._RF.push(t,"a521206bMtESISMmd/D44Th","mechanic-types"),Object.defineProperty(o,"__esModule",{value:!0}),o.MechanicType=void 0,function(e){e[e.BombBoster=0]="BombBoster",e[e.TeleportBoster=1]="TeleportBoster",e[e.Basic=2]="Basic"}(o.MechanicType||(o.MechanicType={})),cc._RF.pop()},{}],"move-validator":[function(e,t,o){"use strict";cc._RF.push(t,"7dd72tpylpLoJejIwrk8Ajo","move-validator"),Object.defineProperty(o,"__esModule",{value:!0}),o.MovePlayerValidator=void 0;var n=function(){function e(){}return e.prototype.hasPossibleMoves=function(e){for(var t=e.getTiles(),o=t.length,n=t[0].length,i=0;i<o;i++)for(var r=0;r<n;r++){var c=t[i][r];if(c)for(var s=0,a=[{x:i+1,y:r},{x:i,y:r+1},{x:i-1,y:r},{x:i,y:r-1}];s<a.length;s++){var l=a[s];if(this.isValidPosition(l.x,l.y,o,n)){var u=t[l.x][l.y];if(u&&u.tileType===c.tileType)return console.log("Found possible move for "+c.tileType),!0}}}return console.log("No possible moves found"),!1},e.prototype.isValidPosition=function(e,t,o,n){return e>=0&&e<o&&t>=0&&t<n},e}();o.MovePlayerValidator=n,cc._RF.pop()},{}],"progress-controller":[function(e,t,o){"use strict";cc._RF.push(t,"a2ad2qKhE1DNqFFcSRZP32R","progress-controller"),Object.defineProperty(o,"__esModule",{value:!0}),o.ProgressController=void 0;var n=function(){function e(e,t){this.progress=e,this.levels=t}return e.prototype.getWinScoreThreshold=function(){return this.levels.getCurrentLevel().winScoreThreshold},e.prototype.getMaxStep=function(){return this.levels.getCurrentLevel().maxSteps},e.prototype.getCurrentScore=function(){return this.progress.currentScore},e.prototype.getRemainingSteps=function(){return this.progress.remainingSteps},e.prototype.onWin=function(){this.levels.nextLevel(),this.progress.resetLevel()},e.prototype.onLose=function(){this.levels.reset(),this.progress.resetLevel()},e.prototype.checkProgress=function(){this.getCurrentScore()>=this.getWinScoreThreshold()?(this.onWinEvent&&this.onWinEvent(),this.onWin()):this.getRemainingSteps()<=0&&(this.onLoseEvent&&this.onLoseEvent(),this.onLose())},e}();o.ProgressController=n,cc._RF.pop()},{}],"progress-service":[function(e,t,o){"use strict";cc._RF.push(t,"8ce93CCCP5FypBbxvbk3bTi","progress-service"),Object.defineProperty(o,"__esModule",{value:!0}),o.ProgressService=void 0;var n=function(){function e(e,t){this._levelService=e,this._scoreFormula=t,this.currentScore=0,this.isGameOver=!1,this.resetLevel()}return e.prototype.getWinScoreThreshold=function(){return this._levelService.getCurrentLevel().winScoreThreshold},e.prototype.getMaxStep=function(){return this._levelService.getCurrentLevel().maxSteps},e.prototype.resetLevel=function(){var e=this._levelService.getCurrentLevel();this.remainingSteps=e.maxSteps,this.isGameOver=!1,this.currentScore=0},e.prototype.nextStep=function(e){e>1&&(this.currentScore+=this._scoreFormula(e)),this.remainingSteps--,this.checkGameOver()},e.prototype.checkGameOver=function(){return this.isGameOver=this.currentScore>=this._levelService.getCurrentLevel().winScoreThreshold||this.remainingSteps<=0},e}();o.ProgressService=n,cc._RF.pop()},{}],"result-level-controller":[function(e,t,o){"use strict";cc._RF.push(t,"03179QTKTBD65670nXGNtWo","result-level-controller"),Object.defineProperty(o,"__esModule",{value:!0}),o.ResultLevelController=void 0;var n=function(){function e(e,t){this._progressService=e,this._tableController=t}return e.prototype.clearLevel=function(){this._progressService.resetLevel(),this._tableController.resetTable()},e}();o.ResultLevelController=n,cc._RF.pop()},{}],"result-state":[function(e,t,o){"use strict";cc._RF.push(t,"d25fei1aFhCIJt3n5/INyLI","result-state");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function c(e){try{a(n.next(e))}catch(t){r(t)}}function s(e){try{a(n.throw(e))}catch(t){r(t)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(c,s)}a((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return a([e,t])}}function a(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=t.call(e,c)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.ResultState=void 0;var r=e("../../logic/result-level-controller"),c=e("../state-machine/state-names"),s=function(){function e(e,t,o){this._stateMachine=e,this._gameFactory=t,this._progressServer=o}return e.prototype.run=function(e){return n(this,void 0,Promise,function(){var t=this;return i(this,function(o){switch(o.label){case 0:return new r.ResultLevelController(this._progressServer,e.tableController),[4,setTimeout(function(){var o;"win"===e.result?((o=t._gameFactory.createCurtain()).win(e.message),o.onContinue=function(){t._stateMachine.run(c.StateNames.CreateContent)}):((o=t._gameFactory.createCurtain()).lose(e.message),o.onRestart=function(){t._stateMachine.run(c.StateNames.CreateContent)})},1e3)];case 1:return o.sent(),[2]}})})},e.prototype.stop=function(){},e}();o.ResultState=s,cc._RF.pop()},{"../../logic/result-level-controller":"result-level-controller","../state-machine/state-names":"state-names"}],serviceLocator:[function(e,t,o){"use strict";cc._RF.push(t,"88f5eQRvnVHrrLNqMv4pZz4","serviceLocator"),Object.defineProperty(o,"__esModule",{value:!0}),o.ServiceLocator=void 0;var n=function(){function e(){this._services=new Map}return e.Container=function(){return null==this._instance&&(console.log("start create sl instance"),this._instance=new e),this._instance},e.prototype.registerSingle=function(e){console.log("register service ",e);var t=e.constructor;this._services.set(t,e)},e.prototype.single=function(e){var t=e;console.log("get service ",t);var o=this._services.get(t);if(!o)throw new Error("Service "+t.name+" not registered");return o},e._instance=null,e}();o.ServiceLocator=n,cc._RF.pop()},{}],"state-interfaces":[function(e,t,o){"use strict";cc._RF.push(t,"29c27EKHOZP4rR/N9FD/J+j","state-interfaces"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],"state-names":[function(e,t,o){"use strict";cc._RF.push(t,"65c9bUSiwlCnKTH+x0fnB4w","state-names"),Object.defineProperty(o,"__esModule",{value:!0}),o.StateNames=void 0,function(e){e.Initialize="InitializeState",e.CreateContent="CreateContentState",e.GameLoop="GameLoopState",e.ResultState="ResultState"}(o.StateNames||(o.StateNames={})),cc._RF.pop()},{}],"table-cell":[function(e,t,o){"use strict";cc._RF.push(t,"a81d6FR5B1L3J9CL7/mJKj9","table-cell"),Object.defineProperty(o,"__esModule",{value:!0}),o.TableCell=void 0;var n=function(){function e(e,t,o,n){this._collumn=e,this._line=t,this._position=o,this._free=n}return e.prototype.getCollumn=function(){return this._collumn},e.prototype.getLine=function(){return this._line},e.prototype.getPosition=function(){return this._position},e.prototype.isFree=function(){return this._free},e.prototype.setFree=function(e){this._free=e},e}();o.TableCell=n,cc._RF.pop()},{}],"table-controller":[function(e,t,o){"use strict";cc._RF.push(t,"c9ddcY2gbtJkodXTJ05g77E","table-controller"),Object.defineProperty(o,"__esModule",{value:!0}),o.TableController=void 0;var n=function(){function e(e,t,o){this._tableView=e,this._model=t,this._vfxFactory=o,this.init()}return e.prototype.init=function(){for(var e=this,t=this._model.getTiles(),o=this._model.getTableCells(),n=0;n<t.length;n++)for(var i=function(i){var c=t[n][i];c&&(c.addListener(function(){return e.onTileClick(c)}),r._tableView.addTile(c,o[n][i]))},r=this,c=0;c<t[n].length;c++)i(c);this._model.onMoveTileAction=function(t,o){return e.moveTileOnView(t,o)},this._model.onAddTileAction=function(t,o){return e.addTileOnView(t,o)},this._model.onClearModelAction=function(t){return e.onClearTile(t)}},e.prototype.setMechanicController=function(e){this._mechanicController=e},e.prototype.moveTileOnView=function(e,t){this._tableView.moveTile(e,t)},e.prototype.addTileOnView=function(e,t){var o=this;this._tableView.addTile(e,t),e.addListener(function(){return o.onTileClick(e)})},e.prototype.onClearTile=function(e){e.removeListener(),this._tableView.removeTile(e)},e.prototype.onFalseBurned=function(e){this._tableView.showFalseBurnMessage(e),this.onFalseBurnedAction&&this.onFalseBurnedAction()},e.prototype.onTileClick=function(e){this._mechanicController.onTileClick(e)},e.prototype.onBombAction=function(e){this._vfxFactory.createVfxBomb(e)},e.prototype.onDeselectTile=function(e){e.setActiveHightlight(!1)},e.prototype.onSelectTile=function(e){e.setActiveHightlight(!0)},e.prototype.resetTable=function(){this._model.clearTable()},e.prototype.removeClickTileListeners=function(){for(var e=this._model.getTiles(),t=0;t<e.length;t++)for(var o=0;o<e[t].length;o++){var n=e[t][o];n&&n.removeListener()}},e.prototype.onTurnEnd=function(){this.onEndTurnAction&&this.onEndTurnAction()},e}();o.TableController=n,cc._RF.pop()},{}],"table-model":[function(e,t,o){"use strict";cc._RF.push(t,"3b989ANl/JOebF4QGCb12uD","table-model"),Object.defineProperty(o,"__esModule",{value:!0}),o.TableModel=void 0;var n=function(){function e(e,t){this._tableCells=e,this._tiles=t}return e.prototype.onAddTile=function(e,t){this.onAddTileAction&&this.onAddTileAction(e,t)},e.prototype.onMoveTile=function(e,t){this.onMoveTileAction&&this.onMoveTileAction(e,t)},e.prototype.getTableCells=function(){return this._tableCells},e.prototype.getTiles=function(){return this._tiles},e.prototype.getTile=function(e,t){return this.getTiles()[e][t]},e.prototype.setTile=function(e,t,o){this.getTiles()[e][t]=o},e.prototype.getCell=function(e,t){return this.getTableCells()[e][t]},e.prototype.getTilePosition=function(e){for(var t=this.getTiles(),o=0;o<t.length;o++)for(var n=0;n<t[o].length;n++)if(t[o][n]===e)return{col:o,row:n};return{col:-1,row:-1}},e.prototype.getTileCount=function(){var e,t=this.getTiles();return{columns:t.length,rows:(null===(e=t[0])||void 0===e?void 0:e.length)||0}},e.prototype.clearTable=function(){for(var e=this.getTiles(),t=this.getTableCells(),o=0;o<e.length;o++)for(var n=0;n<e[o].length;n++){var i=e[o][n];i&&(this.onClearModelAction(i),e[o][n]=null,t[o][n].setFree(!0))}},e}();o.TableModel=n,cc._RF.pop()},{}],"table-view":[function(e,t,o){"use strict";cc._RF.push(t,"4b047pohDRFQLwMp8UszKEN","table-view");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.content=null,t.nodeView=null,t}return i(t,e),t.prototype.onLoad=function(){this.nodeView=this.node},t.prototype.getContent=function(){return this.content},t.prototype.showFalseBurnMessage=function(e){var t=e.nodeTile,o=cc.sequence(cc.scaleTo(.1,1.2),cc.scaleTo(.1,.9),cc.scaleTo(.1,1.1),cc.scaleTo(.1,1));t.runAction(o)},t.prototype.addTile=function(e,t){e.nodeTile.setParent(this.content),e.nodeTile.setPosition(t.getPosition()),e.nodeTile.scale=0,e.nodeTile.angle=0,cc.tween(e.nodeTile).delay(.2).to(.3,{scale:1},{easing:"backOut"}).call(function(){cc.tween(e.nodeTile).to(.2,{angle:-12},{easing:"sineInOut"}).start()}).start()},t.prototype.explosion=function(e){cc.tween(e.nodeTile).to(.1,{scale:0},{easing:"backIn"}).call(function(){e.destroyTile()}).start()},t.prototype.removeTile=function(e){cc.tween(e.sprite.node).to(.1,{scale:0},{easing:"backIn"}).call(function(){e.destroyTile()}).start()},t.prototype.moveTile=function(e,t){cc.tween(e.nodeTile).to(.3,{x:t.x,y:t.y},{easing:"quadOut"}).start()},r([a(cc.Node)],t.prototype,"content",void 0),r([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],"teleport-booster-mechanic":[function(e,t,o){"use strict";cc._RF.push(t,"e185985kqxHjKvbxwEKAmvv","teleport-booster-mechanic");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.TeleportBoosterMechanic=void 0;var r=e("./abstract-machanic"),c=e("./mechanic-types"),s=function(e){function t(t){var o=e.call(this,t)||this;return o.firstSelectedTile=null,o.mechanicType=c.MechanicType.TeleportBoster,o}return i(t,e),t.prototype.onTileClick=function(e){if(!this.firstSelectedTile||!this.firstSelectedTile.nodeTile)return this.firstSelectedTile=e,console.log("first tile selected setup: ",this.firstSelectedTile.nodeTile),this.tableController.onSelectTile(e),!1;if(this.firstSelectedTile===e)return this.tableController.onDeselectTile(e),this.firstSelectedTile=null,!1;var t=this.tableModel.getTilePosition(this.firstSelectedTile),o=this.tableModel.getTilePosition(e);return!(!t||!o||(this.swapTiles(t,o,e),this.tableController.onDeselectTile(this.firstSelectedTile),this.firstSelectedTile=null,0))},t.prototype.swapTiles=function(e,t,o){var n=this.tableModel.getTile(e.col,e.row),i=this.tableModel.getTile(t.col,t.row),r=this.tableModel.getTilePosition(this.firstSelectedTile),c=this.tableModel.getTilePosition(o);if(console.log("first tile type: "+n.tileType+",first tile pos:  "+JSON.stringify(r)+",\n second tile type: "+i.tileType+", second tile type: "+JSON.stringify(c)),n&&i){this.tableModel.setTile(e.col,e.row,i),this.tableModel.setTile(t.col,t.row,n);var s=this.tableModel.getCell(e.col,e.row),a=this.tableModel.getCell(t.col,t.row),l=this.tableModel.getTilePosition(this.firstSelectedTile),u=this.tableModel.getTilePosition(o);console.log("first tile type: "+n.tileType+",first tile pos:  "+JSON.stringify(l)+",\n second tile type: "+i.tileType+", second tile type: "+JSON.stringify(u)),this.tableModel.onMoveTileAction(n,a.getPosition()),this.tableModel.onMoveTileAction(i,s.getPosition()),this.dispatchUseMechanicEvent(),this.onTurnEnd()}},t.prototype.onTurnEnd=function(){this.firstSelectedTile&&(this.tableController.onDeselectTile(this.firstSelectedTile),this.firstSelectedTile=null),this.tableController.onTurnEnd()},t}(r.AbstractMechanic);o.TeleportBoosterMechanic=s,cc._RF.pop()},{"./abstract-machanic":"abstract-machanic","./mechanic-types":"mechanic-types"}],"tile-factory":[function(e,t,o){"use strict";cc._RF.push(t,"7dd77XnjD9ERaHx0St8/Xq8","tile-factory"),Object.defineProperty(o,"__esModule",{value:!0}),o.TileFactory=void 0;var n=e("../../../configs/configs"),i=e("../../../logic/tile"),r=function(){function e(e){this._assetProvider=e}return e.prototype.createRandomTile=function(e){var t=this.getRandomTileModel();return this.createTile(t.tileType,t.sprite,e)},e.prototype.createTiles=function(e){for(var t=[],o=0;o<e.length;o++){t[o]=[];for(var n=0;n<e[o].length;n++){var i=e[o][n];if(i.isFree()){var r=this.getRandomTileModel(),c=this.createTile(r.tileType,r.sprite,i);i.setFree(!1),t[o][n]=c}else t[o][n]=null}}return t},e.prototype.getRandomTileModel=function(){var e=Math.random(),t=Math.floor(e*n.TILE_MODELS.length),o=n.TILE_MODELS[t],i=o.path,r=o.type,c=this._assetProvider.getAsset(i),s=new cc.SpriteFrame;return s.setTexture(c),{tileType:r,sprite:s}},e.prototype.createTile=function(e,t,o){try{var r=this._assetProvider.instantiateAsset(n.PREFABS.tilePrefab).getComponent(i.default);return r.node.setPosition(o.getPosition()),r.Init(e,t),r}catch(c){console.error("Failed to create table:",c)}},e}();o.TileFactory=r,cc._RF.pop()},{"../../../configs/configs":"configs","../../../logic/tile":"tile"}],"tile-type":[function(e,t,o){"use strict";cc._RF.push(t,"aea94/hd0xMD5AOW4/Aanlr","tile-type"),Object.defineProperty(o,"__esModule",{value:!0}),o.TileType=void 0,function(e){e.BLUE="blue",e.RED="red",e.GREEN="green",e.PURPLE="purple",e.YELLOW="yellow"}(o.TileType||(o.TileType={})),cc._RF.pop()},{}],tile:[function(e,t,o){"use strict";cc._RF.push(t,"9b4fe3dd5ZMh5e6wycNirgR","tile");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./tile-type"),s=cc._decorator,a=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tileType=c.TileType.BLUE,t.sprite=null,t.highlight=null,t.nodeTile=null,t}return i(t,e),t.prototype.Init=function(e,t){this.nodeTile=this.node,this.tileType=e,this.sprite.spriteFrame=t,console.log("init ",this.nodeTile+" "+this.tileType+" "+this.sprite)},t.prototype.onDestroy=function(){console.log("destroy ",this.nodeTile+" "+this.tileType+" "+this.sprite)},t.prototype.addListener=function(e){this.touchHandler=e,this.sprite.node.on(cc.Node.EventType.TOUCH_END,this.touchHandler,this)},t.prototype.removeListener=function(){if(null===this.touchHandler||void 0===this.touchHandler)throw new Error("no touch handler");this.sprite.node.off(cc.Node.EventType.TOUCH_END,this.touchHandler,this)},t.prototype.setActiveHightlight=function(e){this.highlight.node.active=e},t.prototype.destroyTile=function(){this.destroy()},r([l],t.prototype,"tileType",void 0),r([l(cc.Sprite)],t.prototype,"sprite",void 0),r([l(cc.Sprite)],t.prototype,"highlight",void 0),r([a],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./tile-type":"tile-type"}],"ui-panel-controller":[function(e,t,o){"use strict";cc._RF.push(t,"8518arjEn9Ph5v3L4uBwp+/","ui-panel-controller"),Object.defineProperty(o,"__esModule",{value:!0}),o.UIPanelController=void 0;var n=e("../logic/game-mechanic/booster-bomb-mechanic"),i=e("../logic/game-mechanic/teleport-booster-mechanic"),r=function(){function e(e,t,o,n,i){this._progressController=e,this._progressService=t,this._uiPanelView=o,this._mechanicService=n,this.boosterService=i,this.start()}return e.prototype.start=function(){var e=this;this._uiPanelView.init(this._progressController.getWinScoreThreshold(),this._progressService.getMaxStep()),this.updateBoostersUI(),this.boosterService.onUpdate(function(){return e.updateBoostersUI()}),this._uiPanelView.onBombButtonClick=function(){return e.onClickBombBooster()},this._uiPanelView.onTeleportButtonClick=function(){return e.onClickTeleportBooster()},this._mechanicService.onClickTile=function(t){return e.onClickTile(t)}},e.prototype.removeBoosterListeners=function(){this._uiPanelView.removeListeners(),this._mechanicService.removeListeners()},e.prototype.updateBoostersUI=function(){var e=this.boosterService.getBombTrials(),t=this.boosterService.getTeleportTrials();this._uiPanelView.updateBombCount(e),this._uiPanelView.updateTeleportCount(t),this._uiPanelView.setBombButtonActive(e>0),this._uiPanelView.setTeleportButtonActive(t>0)},e.prototype.summonClickBomb=function(){this._uiPanelView.playBombSummonAnimation()},e.prototype.updateScore=function(){this._uiPanelView.updateScore(this._progressService.currentScore),this._uiPanelView.updateStep(this._progressService.remainingSteps)},e.prototype.onClickTeleportBooster=function(){if(!(this._mechanicService.getActiveMechanic()instanceof i.TeleportBoosterMechanic)&&this.boosterService.getTeleportTrials()>0){var e=this._mechanicService.getMechanicByType(i.TeleportBoosterMechanic);this._mechanicService.setActiveMechanic(e),this._uiPanelView.playTeleportActivationAnimation()}},e.prototype.onClickBombBooster=function(){this._mechanicService.getActiveMechanic()instanceof n.BoosterBombMechanic||this.boosterService.getBombTrials()>0&&(this.setActiveBomb(),this._uiPanelView.playBombActivationAnimation())},e.prototype.onClickTile=function(){},e.prototype.setActiveBomb=function(){var e=this._mechanicService.getMechanicByType(n.BoosterBombMechanic);e?this._mechanicService.setActiveMechanic(e):console.error("bombMechanic is undefined")},e}();o.UIPanelController=r,cc._RF.pop()},{"../logic/game-mechanic/booster-bomb-mechanic":"booster-bomb-mechanic","../logic/game-mechanic/teleport-booster-mechanic":"teleport-booster-mechanic"}],"ui-panel":[function(e,t,o){"use strict";cc._RF.push(t,"954b3K6+QRPn4GSO3PV9Dl7","ui-panel");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.UiPanelView=void 0;var c=cc._decorator,s=c.ccclass,a=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stepsLabel=null,t.scoreLabel=null,t.countBombLabel=null,t.bombButton=null,t.teleportButton=null,t.countTeleportLabel=null,t}return i(t,e),t.prototype.onLoad=function(){this.nodeView=this.node},t.prototype.init=function(e,t){this._winScore=e,this.stepsLabel.string=t.toString(),this.scoreLabel.string="0/"+e,this.bombButton.node.on(cc.Node.EventType.TOUCH_END,this.clickBomb,this),this.teleportButton.node.on(cc.Node.EventType.TOUCH_END,this.clickTeleport,this),this.setBombButtonActive(!0),this.setTeleportButtonActive(!0),console.log("init ui panel view")},t.prototype.updateScore=function(e){this.scoreLabel.string=e+"/"+this._winScore,this.animateLabel(this.scoreLabel,.3)},t.prototype.updateStep=function(e){this.stepsLabel.string=e.toString(),this.animateLabel(this.stepsLabel,.5)},t.prototype.updateBombCount=function(e){console.log("update bomb count ",this.countBombLabel),this.countBombLabel.string=e.toString(),this.animateLabel(this.countBombLabel,.5)},t.prototype.setBombButtonActive=function(e){var t=this.bombButton.node;cc.Tween.stopAllByTarget(t),this.animateButton(t,e)},t.prototype.setTeleportButtonActive=function(e){var t=this.teleportButton.node;cc.Tween.stopAllByTarget(t),this.animateButton(t,e)},t.prototype.updateTeleportCount=function(e){this.countTeleportLabel.string=e.toString(),this.animateLabel(this.countTeleportLabel,.5)},t.prototype.playBombActivationAnimation=function(){this.playButtonActiveAnimation(this.bombButton.node)},t.prototype.playTeleportActivationAnimation=function(){this.playButtonActiveAnimation(this.teleportButton.node)},t.prototype.playBombSummonAnimation=function(){cc.Tween.stopAllByTarget(this.bombButton.node),cc.tween(this.bombButton.node).to(.3,{scale:1.25,color:cc.Color.RED},{easing:"sineOut"}).to(.4,{scale:1,color:cc.Color.WHITE},{easing:"sineIn"}).to(.1,{angle:-5}).to(.1,{angle:5}).to(.1,{angle:0}).repeat(10).start()},t.prototype.removeListeners=function(){this.onTeleportButtonClick=null,this.onBombButtonClick=null},t.prototype.playButtonActiveAnimation=function(e){cc.Tween.stopAllByTarget(e),e.scale=1,e.color=cc.Color.WHITE,cc.tween(e).to(.3,{scale:1.3,color:cc.Color.GREEN},{easing:"sineOut"}).to(.1,{scale:1.1}).to(.1,{scale:1.3}).to(.1,{scale:1.1}).to(.1,{scale:1.3}).to(.1,{scale:1.1}).call(function(){cc.tween(e).to(.3,{scale:1,color:cc.Color.WHITE},{easing:"sineOut"}).start()}).start()},t.prototype.clickTeleport=function(){this.onTeleportButtonClick&&this.onTeleportButtonClick()},t.prototype.clickBomb=function(){this.onBombButtonClick&&this.onBombButtonClick()},t.prototype.animateButton=function(e,t){cc.Tween.stopAllByTarget(this.node),t?(e.active=!0,e.opacity=255,e.scale=1,e.color=cc.Color.WHITE,cc.tween(e).to(.3,{scale:1.2},{easing:"sineOut"}).to(.3,{scale:1},{easing:"sineIn"}).start()):cc.tween(e).to(.25,{scale:1},{easing:"sineIn"}).call(function(){e.color=new cc.Color(180,180,180)}).start()},t.prototype.animateLabel=function(e,t){e&&e.node&&cc.tween(e.node).to(t,{scale:1.2},{easing:"sineOut"}).to(.1,{scale:1},{easing:"sineIn"}).start()},t.prototype.onDestroy=function(){var e,t;null===(t=null===(e=this.bombButton)||void 0===e?void 0:e.node)||void 0===t||t.off(cc.Node.EventType.TOUCH_END,this.clickBomb,this)},r([a(cc.Label)],t.prototype,"stepsLabel",void 0),r([a(cc.Label)],t.prototype,"scoreLabel",void 0),r([a(cc.Label)],t.prototype,"countBombLabel",void 0),r([a(cc.Button)],t.prototype,"bombButton",void 0),r([a(cc.Button)],t.prototype,"teleportButton",void 0),r([a(cc.Label)],t.prototype,"countTeleportLabel",void 0),r([s],t)}(cc.Component);o.UiPanelView=l,cc._RF.pop()},{}],"vfx-factory":[function(e,t,o){"use strict";cc._RF.push(t,"d9958bm4g9BTb5arAZns1Ql","vfx-factory"),Object.defineProperty(o,"__esModule",{value:!0}),o.VfxFactory=void 0;var n=e("../../../configs/configs"),i=function(){function e(e){this._assetProvider=e}return e.prototype.createVfxBomb=function(e){var t=this.createBombEffect(e.sprite.node).getComponent(cc.Sprite);t.node.active=!0,t.node.opacity=0,cc.tween(t.node).to(.3,{opacity:255},{easing:cc.easing.sineOut}).delay(1).to(.3,{opacity:0},{easing:cc.easing.sineIn}).delay(.3).call(function(){t.node.destroy()}).start()},e.prototype.createBombEffect=function(e){try{var t=cc.director.getScene().getChildByName("Canvas"),o=this._assetProvider.instantiateAsset(n.PREFABS.BombEffectPrefab),i=e.convertToWorldSpaceAR(cc.v2(0,0)),r=t.convertToNodeSpaceAR(i);return o.setParent(t),o.setPosition(r),o}catch(c){console.error("Failed to create curtain:",c)}},e}();o.VfxFactory=i,cc._RF.pop()},{"../../../configs/configs":"configs"}]},{},["configs","curtain","entry-point","game","asset-provider","game-factory","tile-factory","vfx-factory","level-config-service","level-service","progress-service","move-validator","serviceLocator","game-state-machine","state-interfaces","state-names","create-content-state","game-loop-state","initialize-state","result-state","abstract-machanic","basic-mechanic","booster-bomb-mechanic","booster-handler","game-mechanic","mechanic-controller","mechanic-event-system","mechanic-types","teleport-booster-mechanic","progress-controller","result-level-controller","table-cell","table-controller","table-model","table-view","tile-type","tile","ui-panel-controller","ui-panel"]);